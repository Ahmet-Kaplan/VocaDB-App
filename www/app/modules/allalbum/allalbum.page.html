<ion-view title="Albums" hide-back-button="true">
    <ion-nav-buttons side="left">
        <button menu-toggle="left" class="button button-icon icon ion-navicon"></button>
    </ion-nav-buttons>
    <ion-header-bar class="bar bar-light bar-subheader item-input-inset ">
        <button ng-show="vm.enableScan" class="button button-icon icon ion-qr-scanner" ng-click="vm.scan()"></button>
        <label class="item-input-wrapper">
            <div ng-if='vm.loading'>
                 <ion-spinner icon="ios-small"></ion-spinner>
            </div>
            
            <div ng-if='!vm.loading'>
                 <i class='icon placeholder-icon ion-ios-search' ></i>
            </div>
            <input type="search" placeholder="search"  ng-model="vm.query" ng-change="vm.search()">
        </label>
    </ion-header-bar>

    <ion-content class="stable-bg" has-bouncing="true">
        <div ng-show="vm.albums.length==0 && vm.inited">
           <div class="card">
            <div class="item item-text-wrap">
                <center>
                    <h2 style="opacity: 0.5;">No result</h2>
                </center>
            </div>
          </div>
        </div>
        <ion-list>
            <ion-item class="item-thumbnail-left" ng-click="vm.selectAlbum(album)"  ng-repeat="album in vm.albums" ng-href="#/menu/album/{{album.id}}">
                <vc-image category="album" item-id="{{album.id}}"></vc-image>

                <h2>{{album.defaultName}}</h2>
                <p>{{album.artistString}}<br><span style="float:right;"><i class="icon ion-ios-calendar-outline"></i> {{album.releaseDate.formatted}}</span>{{vm.convertDiscType(album.discType)}}</p>
                

            </ion-item>
        </ion-list>
         <ion-infinite-scroll icon="none"  on-infinite="vm.loadMore()" distance="1%"></ion-infinite-scroll>  
    </ion-content>
</ion-view>